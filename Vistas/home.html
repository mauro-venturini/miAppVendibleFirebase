<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tienda | Mi App Vendible</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Mi App Vendible</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menu">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="menu">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="usuario.html">Mi Panel</a></li>
        <li class="nav-item"><a class="nav-link" href="carrito.html">🛒 Carrito</a></li>
        <a class="btn btn-outline-light ms-2" href="registroUsu.html"> Iniciar sesión</a>
      </ul>
      <!-- 👇 Acá va tu botón de login -->
      
    </div>
  </div>
</nav>

  <!-- Encabezado -->
  <header class="bg-primary text-white text-center py-5">
    <div class="container">
      <h1 class="display-4">Productos destacados</h1>
      <p class="lead">Agregá tus favoritos al carrito y comenzá a comprar</p>
    </div>
  </header>

  <!-- Productos -->
  <section class="container my-5">
    <div class="row" id="productos">
      <!-- Cards de productos se insertan aquí -->
    </div>
  </section>

  <footer class="bg-dark text-white text-center py-3">
    <p class="mb-0">© 2025 Mi App Vendible</p>
  </footer>

  <!-- Firebase + Bootstrap -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyA8sndXPT5CN-ZzypweOPiQ3mbgmPnJUDk",
      authDomain: "miappvendible.firebaseapp.com",
      projectId: "miappvendible",
      storageBucket: "miappvendible.appspot.com",
      messagingSenderId: "149501151545",
      appId: "1:149501151545:web:8e6430073d82409e2400e8",
      measurementId: "G-BFFFHXC9J4"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    let usuarioActual = null;

    onAuthStateChanged(auth, (user) => {
      usuarioActual = user;
    });

    const productos = [
      { id: 1, nombre: "Auriculares Bluetooth", precio: 15000, imagen: "https://via.placeholder.com/300x200?text=Auriculares" },
      { id: 2, nombre: "Mouse Gamer RGB", precio: 8500, imagen: "https://via.placeholder.com/300x200?text=Mouse+Gamer" },
      { id: 3, nombre: "Teclado Mecánico", precio: 22000, imagen: "https://via.placeholder.com/300x200?text=Teclado" }
    ];

    const contenedor = document.getElementById("productos");

    productos.forEach(p => {
      const card = document.createElement("div");
      card.className = "col-md-4 mb-4";
      card.innerHTML = `
        <div class="card h-100">
          <img src="${p.imagen}" class="card-img-top" alt="${p.nombre}">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">${p.nombre}</h5>
            <p class="card-text">$${p.precio.toLocaleString()}</p>
            <button class="btn btn-success mt-auto" onclick="agregarAlCarrito(${p.id})">Agregar al carrito</button>
          </div>
        </div>
      `;
      contenedor.appendChild(card);
    });

    window.agregarAlCarrito = function (idProducto) {
      if (!usuarioActual) {
        alert("Debés iniciar sesión para agregar productos al carrito.");
        return;
      }

      const producto = productos.find(p => p.id === idProducto);
      let carrito = JSON.parse(localStorage.getItem("carrito")) || [];
      carrito.push(producto);
      localStorage.setItem("carrito", JSON.stringify(carrito));
      alert(`"${producto.nombre}" fue agregado al carrito.`);
    };
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>